---

title: 数据库操作-1
date: 2020-10-24 10:08:49
tags:
---

1、SQL模式的定义与删除:

```sql
CREATE SCHEMA Teaching_DB;
```

```sql
DROP SCHEMA Teaching_DB;
```

2、表的建立

```sql
CREATE TABLE Student(
	sno char(5) not null UNIQUE,
	sname char(8) not null,
	sex char(2),
	age int,
	dept char(20)
)
```

```sql
CREATE TABLE Student_2(
	sno char(5),
	sname char(8) not null,
	sex char(2),
	age SMALLINT,
	dept char(20),
	PRIMARY KEY(sno),
	CHECK (sex IN ('男','女'))
);
```

```sql
CREATE TABLE Student_3(
	sno char(5) PRIMARY KEY,
	sname char(8) not null,
	sex char(2) CHECK(sex in ('男','女')),
	age SMALLINT,
	dept char(20)
);
```

```sql
CREATE TABLE Course(
	cno char(4) PRIMARY KEY,
	cname char(10) not null,
	pcno char(4),
	credit SMALLINT,
	FOREIGN KEY(pcno) REFERENCES Course(cno)
)
```

```sql
CREATE TABLE SC(
	sno char(5), 
	cno char(4),
  grade int,
	PRIMARY KEY(sno, cno),
	FOREIGN KEY(sno) REFERENCES Student(sno),
	FOREIGN KEY(cno) REFERENCES Course(cno),
	CHECK ((grade is null) or (grade BETWEEN 0 and 100))
)
```

3、表的删除、修改

```sql
-- 删除表的某列
ALTER TABLE Student
DROP age
```

```sql
-- 修改某列的类型
ALTER TABLE Student
MODIFY sname char(100)
```

```sql
ALTER TABLE Student
DROP PREPARE KEY
```

```sql
ALTER TABLE Student
ADD PREPARE KEY (sno)
```

```sql
ALTER TABLE Student RENAME TO stu;
```

```sql
ALTER TABLE stu
CHANGE COLUMN sex ssex int

-- 不管用
ALTER TABLE stu
RENAME COLUMN ssex to ss


-- alter table stu drop constraint pk_student;
alter table stu add constraint pk_student primary key(sno);
```

4、插入数据

```sql
INSERT INTO Student_3(sno,sname)
VALUES ('1','1')
```